<div align="center">

# hexo-images-watermark

![favico](./public/images/android-chrome-192x192.png)

[![Build Status](https://travis-ci.com/SpiritLingPub/hexo-images-watermark.svg?branch=master)](https://travis-ci.com/SpiritLingPub/hexo-images-watermark) [![npm version](https://img.shields.io/npm/v/hexo-images-watermark?label=npm%20version)](https://www.npmjs.com/package/hexo-images-watermark) [![npm package download](https://img.shields.io/npm/dm/hexo-images-watermark?label=npm%20downloads)](https://www.npmjs.com/package/hexo-images-watermark) [![NPM License](https://img.shields.io/npm/l/hexo-images-watermark)](https://spdx.org/licenses/GPL-3.0-only.html)

</div>

ä¸€æ¬¾ç”¨äº Hexo é™æ€åšå®¢ç½‘ç«™ç”Ÿæˆæ—¶å¯¹å›¾ç‰‡æ·»åŠ æ°´å°ã€‚

ä¸å¯¹åŸå›¾äº§ç”Ÿä»»ä½•å½±å“ï¼Œåœ¨ç½‘ç«™é™æ€é¡µæ„å»ºè¿‡ç¨‹ä¸­å°†åŸå›¾è¯»å–ï¼Œè¾“å‡ºæ·»åŠ äº†æ°´å°çš„å›¾ç‰‡ã€‚

åœ¨æ„å»ºçš„é™æ€ç½‘ç«™ä¸­ä¸ä¼šå­˜åœ¨åŸå›¾ï¼Œåªå­˜åœ¨æ°´å°å›¾ç‰‡ã€‚

> **ä¸€å®šè¦é˜…è¯»æœ€åçš„æç¤ºäº‹é¡¹ï¼ŒåŒ…å«ç°æœ‰ç‰ˆæœ¬çš„æ”¯æŒæƒ…å†µå’Œå³å°†æ·»åŠ çš„åŠŸèƒ½**

ä½¿ç”¨ `npm` å®‰è£…æ’ä»¶

```shell
npm install hexo-images-watermark
```

ä½¿ç”¨ `yarn` å®‰è£…æ’ä»¶

```shell
yarn add hexo-images-watermark
```

åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ `_config.yml` ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š

```yml
watermark:
    enable: true
    textEnable: true
    rotate: -45
    gravity: centre
```

åœ¨ `hexo generate` è¿è¡Œåä¼šè‡ªåŠ¨ä¸ºä½ çš„ `post` ç›®å½•ä¸‹çš„å›¾ç‰‡æ·»åŠ æ°´å°ï¼Œæ–°çš„å›¾ç‰‡å°†ä¼šè¦†ç›– `public/post` ä¸‹åŸæœ¬çš„å›¾ç‰‡ï¼Œè€Œå¯¹ `source` æºå›¾ç‰‡ä¸ä¼šäº§ç”Ÿå½±å“ã€‚

**ğŸš€ [æ— æ³•å®‰è£…é—®é¢˜è§£å†³](https://github.com/SpiritLingPub/hexo-images-watermark/wiki)**

**ğŸš€ [æŸ¥çœ‹æ”¯æŒç±»å‹](#todo-list)**

**ğŸš€ [æ›´æ–°æ—¥å¿—](CHANGELOG.md)**

ä» `2.0.0` å¼€å§‹æ”¯æŒåŠ¨æ€å›¾ç‰‡ gif å›¾æ·»åŠ æ°´å°ï¼Œä½†æ˜¯ä½ç½®åªèƒ½æ˜¯ä¸­é—´ä½ç½®ï¼Œå¹¶ä¸”ä¸€æ—¦æ°´å°å›¾ç‰‡å¤§äºæºå›¾ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚

æ°´å°å›¾ç‰‡å¤§äºæºå›¾æŠ¥é”™é—®é¢˜ç›®å‰åªå­˜åœ¨ gif åŠ¨æ€å›¾ä¸Šï¼Œé™æ€å›¾åœ¨æœ¬ç‰ˆæœ¬ä¸­å·²ä¿®å¤ã€‚å¦‚æœä¾æ—§å¸Œæœ›èƒ½å¤Ÿæ¸²æŸ“ä¸Šå»ï¼Œä¿æŒå‚æ•° `bigSkip`ä¸º`false`ï¼Œåˆ™ä¼šè‡ªåŠ¨ç¼©æ”¾ï¼Œä»¥é€‚åº”æºå›¾å¤§å°ã€‚

å¦‚æœ `bigSkip`ä¸º`true`ï¼Œé»˜è®¤å€¼æ—¶ï¼Œåˆ™ä¼šè·³è¿‡ä¸æ¸²æŸ“ï¼Œå¹¶ä¸”è¾“å‡ºé»„è‰²è­¦å‘Šæ­¤å›¾ç‰‡å¤ªå°ã€‚

## å‚æ•°

### åŸºæœ¬å‚æ•°

| å­—æ®µ        | æ˜¯å¦å¿…é¡» | é»˜è®¤å€¼ | è¯´æ˜                                                                |
| ----------- | :------: | ------ | ------------------------------------------------------------------- |
| enable      |    âœ…    | false  | `true` å°†ä¼šæ‰§è¡Œå›¾ç‰‡æ·»åŠ æ°´å°ï¼Œ`false` å°†ä¼šä¸æ‰§è¡Œæ·»åŠ                  |
| textEnable  |          | false  | æ˜¯å¦ä½¿ç”¨æ–‡æœ¬æ¥æ·»åŠ æ°´å°ï¼ˆâŒ è­¦å‘Šï¼šç›®å‰ä¸æ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡åŒæ—¶æ·»åŠ æ°´å°ï¼‰ |
| imageEnable |          | false  | æ˜¯å¦ä½¿ç”¨å›¾ç‰‡æ¥æ·»åŠ æ°´å°ï¼ˆâŒ è­¦å‘Šï¼šç›®å‰ä¸æ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡åŒæ—¶æ·»åŠ æ°´å°ï¼‰ |
| static      |          | true   | æ˜¯å¦æ¸²æŸ“é™æ€å›¾                                                      |
| dynamic     |          | true   | æ˜¯å¦æ¸²æŸ“åŠ¨æ€å›¾                                                      |
| log         |          | true   | æ˜¯å¦è¾“å‡ºæ—¥å¿—ä¿¡æ¯                                                    |
| directory   |          | true   | éœ€è¦æ¸²æŸ“çš„æ–‡ä»¶å¤¹ï¼Œé»˜è®¤ä¸º posts æ–‡ä»¶å¤¹                               |

#### directory ä¾‹å­

!!! ä¸€å®šè¦æ•°ç»„å½¢å¼

å…¶ä»–è¯¦ç»†å¯ä»¥æŸ¥çœ‹[æ›´æ–°æ—¥å¿—](CHANGELOG.md)

```yml
watermark:
    enable: true
    textEnable: true
    rotate: -45
    gravity: centre
    directory:
        - posts
```

### `text` å’Œ `image` å…±é€šå‚æ•°ï¼ˆå§‹ç»ˆæœ‰ä½œç”¨ï¼‰

| å­—æ®µ    | æ˜¯å¦å¿…é¡» | é»˜è®¤å€¼    | è¯´æ˜                                                                                      |
| ------- | :------: | --------- | ----------------------------------------------------------------------------------------- |
| gravity |          | southeast | è®¾ç½®æ°´å°ä½ç½®å¤„äºä»€ä¹ˆæ–¹å‘ï¼Œä»¥ `ä¸ŠåŒ—ä¸‹å—å·¦ä¸œå³è¥¿` æ¥ç¡®å®šï¼ˆsharp æ’ä»¶çš„é…ç½®ï¼‰                |
| rotate  |          | 0         | æ—‹è½¬è§’åº¦ï¼Œå¦‚`45`ä»£è¡¨é€†æ—¶é’ˆ 45 åº¦ï¼Œ`-45`ä»£è¡¨é¡ºæ—¶é’ˆ 45 åº¦                                   |
| bigSkip |          | true      | æ˜¯å¦è·³è¿‡æ°´å°å›¾ç‰‡æ¯”åŸå§‹å›¾ç‰‡å¤§çš„ï¼Œfalseï¼Œä¸è·³è¿‡ï¼ŒæŒ‰ç…§åŸå§‹å›¾å¤§å°è¿›è¡Œç¼©æ”¾ï¼Œä¸ä¿è¯ç¼©æ”¾åçš„è´¨é‡ |

gravity å‚æ•°å¯ç”¨å€¼ï¼š

| ç±»å‹      | è¯´æ˜ | å¤‡æ³¨       |
| --------- | ---- | ---------- |
| centre    | ä¸­å¤® | å›¾ç‰‡æ­£ä¸­é—´ |
| north     | åŒ—   | ä¸Šæ–¹ä¸­é—´   |
| west      | ä¸œ   | å·¦è¾¹ä¸­é—´   |
| south     | å—   | ä¸‹è¾¹ä¸­é—´   |
| east      | è¥¿   | å³è¾¹ä¸­é—´   |
| northwest | ä¸œåŒ— | å·¦ä¸Šè§’     |
| southwest | ä¸œå— | å·¦ä¸‹è§’     |
| southeast | è¥¿å— | å³ä¸‹è§’     |
| northeast | è¥¿åŒ— | å³ä¸Šè§’     |

### `text` å‚æ•°ï¼ˆåªå¯¹æ–‡å­—æ°´å°èµ·ä½œç”¨ï¼‰

| å­—æ®µ       | æ˜¯å¦å¿…é¡» | é»˜è®¤å€¼                   | è¯´æ˜                                                                                                     |
| ---------- | :------: | ------------------------ | -------------------------------------------------------------------------------------------------------- |
| text       |          | config.url \| SpiritLing | å°½é‡è‹±æ–‡ï¼Œä¸­æ–‡éœ€è¦å¼•å…¥å­—ä½“ï¼Œå¹¶ä¸”ä¸­æ–‡æœ‰å¯èƒ½å‘ç”Ÿå…¶ä»–é”™è¯¯ï¼Œæ¨èå°±æ˜¯ä¸è®¾ç½®ï¼Œä½¿ç”¨ cofig.yml ä¸­çš„ url          |
| fontPath   |          | undefined                | ä¾‹å­ï¼š`source/static/font/custom.ttf`                                                                    |
| color      |          | rgb(169,169,167)         | é¢œè‰²å¯ä»¥ä½¿ç”¨ rgb,rgba,#xxxxxx ä»¥åŠ red åå­—å¼çš„                                                          |
| fontSize   |          | 18                       | æ–‡æœ¬å­—ä½“å¤§å°                                                                                             |
| background |          | transparent              | é…åˆ text å’Œ rotate ä½¿ç”¨ï¼ŒæŒ‡çš„æ˜¯æ–‡å­—è½¬æˆçš„å›¾ç‰‡ä¸€æ—¦æ—‹è½¬ä¼šå‡ºç°å¤šä½™ç©ºç™½ï¼Œè®¾ç½®è¿™äº›åœ°æ–¹çš„é¢œè‰²ï¼Œä¸€èˆ¬é€æ˜è‰²å³å¯ |

### `image` å‚æ•°ï¼ˆåªå¯¹å›¾ç‰‡æ°´å°èµ·ä½œç”¨ï¼‰

| å­—æ®µ           | æ˜¯å¦å¿…é¡» | é»˜è®¤å€¼        | è¯´æ˜                                         |
| -------------- | :------: | ------------- | -------------------------------------------- |
| watermarkImage |          | watermark.png | æ°´å°å›¾ç‰‡ï¼Œæ”¾ç½®åœ¨ source æ–‡ä»¶æ ¹è·¯å¾„çš„å›¾ç‰‡åç§° |
| width          |          | 50            | å¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾                               |
| height         |          | 50            | å¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾                               |

## ä¾‹å­

### å›¾ç‰‡å¤§äºæ°´å°å›¾ç‰‡

-   åŸå›¾

![åŸå›¾](./public/images/normal.png)

-   å¤„ç†å

![åŸå›¾](./public/images/normal_.png)

#### å›¾ç‰‡å°äºæ°´å°å›¾ç‰‡ï¼Œå¹¶ä¸” bigSkip ä¸º false

-   åŸå›¾

![åŸå›¾](./public/images/small.jpg)

-   å¤„ç†å

![åŸå›¾](./public/images/small_.jpg)

#### åŠ¨æ€å›¾

-   åŸå›¾

![åŸå›¾](./public/images/dynamic.gif)

-   å¤„ç†å

![åŸå›¾](./public/images/dynamic_.gif)

## TODO LIST

-   [x] æ–‡å­—æ°´å°
    -   [x] è‡ªå®šä¹‰æ–‡å­—ï¼Œé¢œè‰²ï¼Œå¤§å°
    -   [x] è‡ªå®šä¹‰å­—ä½“ - 2019-12-24 Done
    -   [ ] æ”¯æŒå¾ªç¯æ·»åŠ 
    -   [x] è¶…é™å¤„ç†
-   [x] å›¾ç‰‡æ°´å°
    -   [x] è‡ªå®šä¹‰æ°´å°å›¾ç‰‡
    -   [ ] è¿œç¨‹æ°´å°å›¾ç‰‡
    -   [ ] æ”¯æŒå¾ªç¯æ·»åŠ 
    -   [x] è¶…é™å¤„ç†
-   [x] ä½ç½®
    -   [x] å›ºå®šä½ç½®ï¼šä¹ä¸ªæ–¹ä½
    -   [ ] è‡ªå®šä¹‰ topï¼Œleft
-   [x] æ—‹è½¬
-   [x] ç¼©æ”¾ï¼ˆä»…é™å›¾ç‰‡ï¼‰
-   [x] å…¶ä»–æ ¼å¼æ”¯æŒ
    -   [x] GIF åŠ¨å›¾
        -   [x] å›ºå®šä½ç½®ï¼šä¸­é—´
-   [x] è‡ªå®šä¹‰æ¸²æŸ“ç›®å½•ï¼ˆæ•°ç»„å½¢å¼ï¼‰

## ä½¿ç”¨æ³¨æ„äº‹é¡¹ âš ï¸âš ï¸âš ï¸

1. æš‚ä¸æ”¯æŒå›¾ç‰‡å’Œæ–‡å­—å…±åŒæ·»åŠ 
2. åªæ”¯æŒ`source/_posts`æ–‡ä»¶å¤¹ä¸‹çš„å›¾ç‰‡ï¼Œä¹Ÿå°±æ˜¯æ–‡ç« æœ¬åœ°å›¾ç‰‡
3. æ°´å°å›¾ç‰‡ä¹Ÿä¸æ”¯æŒè¿œç¨‹å’Œé soucre æ ¹è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œä¹Ÿæ˜¯åªæ”¯æŒ `*.jpg`,`*.jpeg`ï¼Œ`*.png` ä¸‰ç§æ ¼å¼é™æ€å›¾ç‰‡
4. åŠ¨æ€å›¾åªæ”¯æŒ `source/_posts` ä¸‹çš„ `*.gif` å›¾ç‰‡
5. è¯·ä½¿ç”¨ `1.1.x` ä»¥ä¸Šç‰ˆæœ¬ï¼Œ `1.0.x` æ˜¯è¿›è¡Œ Hexo api ç›¸å…³æµ‹è¯•æ—¶ä½¿ç”¨çš„ï¼Œç‰ˆæœ¬æ‚ä¹±æ— ç« ï¼Œä½¿ç”¨ `1.0.x` ç‰ˆæœ¬å‡ºç°ä»»ä½•é—®é¢˜ï¼Œæ¦‚ä¸ç†ä¼š
